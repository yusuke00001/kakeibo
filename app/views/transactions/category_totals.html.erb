<div style="width: 100%; max-width: 600px; margin: 0 auto;">
  <canvas id="categoryChart"></canvas>
</div>

<script>
  const categoryData = <%= raw @category_totals.to_json %>;

document.addEventListener("DOMContentLoaded", function () {
  const ctx = document.getElementById("categoryChart").getContext("2d");

  // データを取得
  const labels = Object.keys(categoryData); // ["給料", "飲食", "趣味"]
  const data = Object.values(categoryData); // [500000, 20000, 15000]

  // グラフを描画
  new Chart(ctx, {
    type: "pie", // 円グラフ
    data: {
      labels: labels,
      datasets: [
        {
          label: "カテゴリー別収支",
          data: data,
          backgroundColor: [
            "rgba(255, 99, 132, 0.2)",
            "rgba(54, 162, 235, 0.2)",
            "rgba(255, 206, 86, 0.2)"
          ],
          borderColor: [
            "rgba(255, 99, 132, 1)",
            "rgba(54, 162, 235, 1)",
            "rgba(255, 206, 86, 1)"
          ],
          borderWidth: 1,
        },
      ],
    },
    options: {
      responsive: true,
    },
  });
});
</script>